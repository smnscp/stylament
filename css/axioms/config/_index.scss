////
/// @group ax-config
////

@use "sass:map";
@use "sass:math";
@use "sass:meta";

$sizes: (
  // xxs: -3,
  xs: -2,
  sm: -1,
  md: 0,
  lg: 1,
  xl: 2,
  // xxl: 3,
);

@function measure($size) {
  // Use square numbers centered around 64ch.
  @return math.pow($size + 8, 2) * 1ch;
}

@function container($size) {
  // Use multiples of 16rem centered around 48rem.
  @return ($size + 3) * 16rem;
}

/// Configuration to be injected by consumers.
/// @type Map
$custom: () !default;

/// Default configuration.
/// @type Map
$default: (
  layout: (
    length: (
      min: 2,
      max: 12,
      line: 4,
    ),
    container: (
      mapped: (
        domain: $sizes,
        function: meta.get-function("container"),
      ),
      literal: (),
      logical: (
        page: "xl",
      ),
    ),
    spacing: (
      literal: (
        block: "var(--length-l1)",
        heading: "var(--length-l1)",
        sectioning:
          "clamp(var(--length-l1), (100vi - var(--container-sm)) / 4, var(--length-l2))",
        inline: 4ch,
        inline-small: 0.5ch,
      ),
      logical: (),
    ),
  ),
  typography: (
    font-family: (
      literal: (
        sans: (
          "Source Sans Pro",
          sans-serif,
        ),
        serif: (
          "Source Serif Pro",
          serif,
        ),
        mono: (
          "Source Code Pro",
          monospace,
        ),
      ),
      logical: (
        body: "serif",
        heading: "sans",
        display: "body",
      ),
    ),
    font-weight: (
      literal: (
        regular: 400,
        bold: 700,
      ),
      logical: (
        body: "regular",
        emphasis: "bold",
        heading: "bold",
      ),
    ),
    line: (
      min: 1.1,
      root: 1.5,
    ),
    measure: (
      mapped: (
        domain: $sizes,
        function: meta.get-function("measure"),
      ),
      literal: (
        full: 100%,
        inf: unset,
      ),
      logical: (
        default: md,
      ),
    ),
    scale: (
      min: -2,
      max: 5,
      base: 1rem,
      // Major third, equal-tempered: ∛2 ≅ 1.26
      // https://www.modularscale.com/?1&em&2@3
      factor: math.pow(2, math.div(1, 3)),
      literal: (),
      logical: (),
    ),
  ),
  ui: (
    shadow: (
      literal: (
        xxs: "0 0.0625rem 0.125rem 0 rgba(0, 0, 0, 0.05)",
        xs:
          "0 0.0625rem 0.1875rem 0 rgba(0, 0, 0, 0.1), \
          0 0.0625rem 0.125rem 0 rgba(0, 0, 0, 0.06)",
        sm:
          "0 0.25rem 0.375rem -0.125rem rgba(0, 0, 0, 0.1), \
          0 0.125rem 0.25rem -0.125rem rgba(0, 0, 0, 0.06)",
        md:
          "0 0.75rem 1rem -0.25rem rgba(0, 0, 0, 0.1), \
          0 0.25rem 0.375rem -0.125rem rgba(0, 0, 0, 0.05)",
        lg:
          "0 1.25rem 1.5rem -0.25rem rgba(0, 0, 0, 0.1), \
          0 0.5rem 0.5rem -0.25rem rgba(0, 0, 0, 0.04)",
        xl: "0 1.5rem 3rem -0.75rem rgba(0, 0, 0, 0.25)",
        xxl: "0 2rem 4rem -0.75rem rgba(0, 0, 0, 0.2)",
      ),
    ),
    stroke: (
      width: (
        min: 1,
        max: 8,
        line: 24,
        literal: (),
        logical: (
          default: 2,
        ),
      ),
      style: (
        literal: (
          default: "solid",
        ),
        logical: (),
      ),
      color: (
        literal: (
          default: "var(--color-tertiary-700)",
        ),
        logical: (),
      ),
    ),
  ),
  color: (
    palettes: (),
    literal: (),
    logical: (),
  ),
);

/// Map of all configuration values merged together.
/// @type Map
/// @requires $default
/// @requires $custom
$merged: map.deep-merge($default, $custom);
