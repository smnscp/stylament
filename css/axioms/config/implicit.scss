////
/// @group ax-config
////

@use "sass:map";
@use "sass:math";

/// Derive implicit configuration values from base configuration.
/// @param {Map} $base Base configuration.
/// @return {Map} Derived configuration values.
@function derive($base) {
  $scale-base: map.get($base, typography, scale, base);
  $line-root: map.get($base, typography, line, root);

  $base-unit: math.unit($scale-base);
  $base-rem: if(
    $base-unit == "em",
    $scale-base * math.div(1rem, 1em),
    if($base-unit == "%", $scale-base * math.div(1rem, 100%), $scale-base)
  );

  @return (
    typography: (
      rlh: $line-root * $base-rem,
      scale: (
        base-unit: $base-unit,
        base-rem: $base-rem,
      ),
    )
  );
}
